<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Industrialización del Litio | Estrategia Nacional</title>

  <style>
    /* =========== Variables / theme =========== */
    :root{
      --bg: #ff0000;
      --accent-1: #a4262c; /* rojo institucional */
      --accent-2: #386641; /* verde institucional */
      --accent-3: #f0a500; /* dorado */
      --card-bg: #ffffff;
      --muted: #2f3a34;
      --glass: rgba(255,255,255,0.85);
      --shadow-1: 0 8px 22px rgba(0,0,0,0.12);
      --shadow-2: 0 14px 40px rgba(0,0,0,0.14);
      --radius: 14px;
      --max-width: 1200px;
    }

    @media (prefers-reduced-motion: reduce) {
      :root { --reduced-motion: 1; }
    }

    /* =========== Reset básico =========== */
    * { box-sizing: border-box; margin:0; padding:0; }
    html,body { height:100%; }
    body {
      font-family: "Segoe UI", system-ui, -apple-system, "Segoe UI Emoji", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#00ffdd 0%, var(--bg) 250%);
      color: #2f3430;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.6;
      overflow-x:hidden;
    }

    .page {
      width: 95%;
      max-width: var(--max-width);
      margin: 0 auto 140px;
    }

    /* =========== Header / Nav =========== */
    header {
      background: linear-gradient(90deg, var(--accent-2), var(--accent-1));
      color: #ffffff;
      position: sticky;
      top:0;
      z-index:999;
      box-shadow: 0 4px 18px rgba(0,0,0,0.18);
    }
    .topbar {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .brand {
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo {
      width:44px;
      height:44px;
      border-radius:10px;
      background:linear-gradient(135deg,#fff1e0,rgba(255,255,255,0.1));
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color:var(--accent-1);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      font-family: Georgia, serif;
    }
    nav ul {
      list-style:none;
      display:flex;
      align-items:center;
      gap:20px;
    }
    nav a {
      color: #ffffff;
      text-decoration:none;
      font-weight:700;
      padding:8px 10px;
      border-radius:8px;
      transition: background .18s ease, transform .12s ease;
    }
    nav a:focus { outline: 3px solid rgba(240,165,0,0.18); outline-offset:4px; }
    nav a:hover { background: rgba(255,255,255,0.06); transform:translateY(-2px); }

    /* Skip link */
    .skip {
      position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
    }
    .skip:focus {
      position:static; width:auto; height:auto; background:#ffffff; color:#000; padding:10px; border-radius:8px; margin:8px;
    }

    /* =========== Hero =========== */
    .hero {
      margin-top: 18px;
      border-radius: 18px;
      overflow: hidden;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:72px 20px;
      min-height: 320px;
      background-image: linear-gradient(135deg, rgba(56,102,65,0.88), rgba(212,216,5,0.64), rgba(164,38,44,0.64)), url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Salar_de_Uyuni%2C_Bolivia.jpg/1200px-Salar_de_Uyuni%2C_Bolivia.jpg');
      background-size:cover;
      background-position:center;
      color: #ff0000;
      box-shadow: var(--shadow-2);
    }
    .hero-inner {
      width:100%;
      max-width:1100px;
      text-align:center;
      backdrop-filter: blur(2px);
      background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.06));
      padding:30px;
      border-radius:12px;
    }
    .hero h1 {
      font-family: Georgia, serif;
      font-size: clamp(1.6rem, 2.8vw, 2.6rem);
      margin-bottom:12px;
      font-weight:900;
      letter-spacing: -0.01em;
      text-shadow: 0 6px 22px rgba(0,0,0,0.45);
    }
    .hero p {
      font-weight:600;
      color: #000000;
      margin-bottom:18px;
      max-width:900px;
      margin-left:auto; margin-right:auto;
    }
    .hero small { display:block; margin-top:6px; opacity:.9 }

    .hero .cta {
      display:inline-flex; gap:12px; align-items:center;
      background: var(--accent-3); color: #2d2a26;
      padding:12px 22px; border-radius:40px; font-weight:800;
      box-shadow: 0 10px 30px rgba(240,165,0,0.18);
      text-decoration:none;
    }
    .hero .cta:active { transform: translateY(1px) scale(.998); }

    .hero::after {
      content:"";
      position:absolute; bottom: -45px; left: -4%;
      height:120px; width:108%;
      background: radial-gradient(closest-side, rgba(255,255,255,0.08), transparent 60%);
      transform: rotate(2deg); pointer-events:none;
    }

    /* =========== Layout sections =========== */
    section { padding: 60px 0; }
    .section-title {
      text-align:center; font-family: Georgia, serif; color:var(--accent-2);
      font-size: clamp(1.3rem, 1.9vw, 2rem); margin-bottom:24px;
      text-shadow: 0 2px 6px rgba(168,198,134,0.25);
    }

    /* Card container used in each section */
    .card {
      background: var(--card-bg); border-radius: var(--radius);
      box-shadow: var(--shadow-1); padding: 26px; margin: 18px auto;
      max-width: 980px; transition: transform .28s cubic-bezier(.2,.9,.2,1), box-shadow .28s ease;
      transform-origin: center; opacity:0; transform: translateY(24px) scale(.995);
      will-change: transform, opacity;
    }
    .card.is-visible { opacity:1; transform: translateY(0) scale(1); }
    .card:hover {
      transform: translateY(-8px) rotateX(.5deg) rotateY(.5deg) scale(1.004);
      box-shadow: var(--shadow-2);
    }

    .content { font-size:1.05rem; color:var(--muted); line-height:1.7; }
    .content p { margin-bottom:12px; }
    .content ul { margin-left:18px; margin-top:10px; color: #2f4b3d; font-weight:700; }

    .inline-icon { width:22px; height:22px; vertical-align:middle; margin-right:10px; fill:var(--accent-1); }

    /* =========== Impact counters =========== */
    .counters {
      display:flex; gap:18px; flex-wrap:wrap; margin-top:12px;
    }
    .counter {
      flex: 1 1 180px;
      background: linear-gradient(180deg, rgba(56,102,65,0.03), rgba(164,38,44,0.01));
      border-radius:12px; padding:14px 18px; text-align:center;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }
    .counter .num {
      font-size:1.6rem; font-weight:900; color:var(--accent-2);
      display:block; margin-bottom:6px;
    }
    .counter .label { font-weight:700; color:#355a48; font-size:0.95rem; }

    /* =========== Slider tweaks =========== */
    .slider { max-width: 780px; margin: 6px auto; border-radius:12px; overflow:hidden; background:linear-gradient(180deg,#02ff81,#f6fff6); box-shadow: 0 12px 30px rgba(56,102,65,0.12); }
    .slides-container { display:flex; transition: transform .55s cubic-bezier(.2,.9,.2,1); }
    .slide { min-width:100%; padding:28px 32px; }
    .slide h3{ color:var(--accent-1); margin-bottom:8px; font-size:1.25rem; }
    .slider-controls { display:flex; gap:12px; justify-content:center; padding:12px 8px; background:transparent; }
    .slider-button { width:14px; height:14px; border-radius:50%; border:none; background:rgba(164,38,44,0.28); cursor:pointer; transition: transform .15s ease, background .18s ease; box-shadow: 0 4px 12px rgba(240,165,0,0.08); }
    .slider-button:focus { outline: 2px solid rgba(56,102,65,0.18); outline-offset: 3px; }
    .slider-button.active { background: var(--accent-3); transform: scale(1.15); box-shadow: 0 8px 24px rgba(240,165,0,0.2); }

    /* =========== Form styles =========== */
    form { display:flex; flex-direction:column; gap:14px; max-width:780px; margin: 6px auto; }
    label { font-weight:800; color:var(--accent-1); font-size:.95rem; }
    input[type="text"], textarea {
      padding:12px 14px; border-radius:10px; border:2px solid #dbe8dd; font-size:1rem; background:#fbfefb;
      transition: box-shadow .18s ease, border-color .18s ease;
    }
    input[type="text"]:focus, textarea:focus {
      border-color: var(--accent-2); box-shadow: 0 8px 22px rgba(56,102,65,0.08); outline:none;
    }
    button[type="submit"] {
      align-self:flex-start; background:linear-gradient(180deg, var(--accent-1), #711818);
      color:#ffffff; padding:12px 24px; border-radius:32px; border:none; font-weight:900; letter-spacing:.6px;
      cursor:pointer; box-shadow: 0 10px 30px rgba(164,38,44,0.18); transition: transform .12s ease, box-shadow .18s ease;
    }
    button[type="submit"]:hover { transform: translateY(-3px); box-shadow: 0 14px 40px rgba(164,38,44,0.24); }

    /* Opinions list */
    #opinionsList { max-width:780px; margin: 18px auto; background: linear-gradient(180deg,#eff9ef,#ffffff); padding:14px 18px; border-radius:12px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); display:none; }
    #opinionsList ul { list-style:none; padding-left:0; }
    #opinionsList li { padding:8px 10px; border-left:4px solid rgba(56,102,65,0.08); margin-bottom:8px; font-weight:700; color:#2d3f33; }

    /* Footer */
    footer { position:fixed; bottom:0; left:0; right:0; background:var(--accent-2); color:#fff; padding:12px; text-align:center; font-weight:700; box-shadow: 0 -8px 20px rgba(0,0,0,0.18); z-index:80; }

    /* Responsive */
    @media (max-width:900px) {
      .counters { gap:10px; }
      .hero { padding:54px 18px; min-height: 260px; }
      .topbar { padding:12px; }
      nav ul { gap:12px; }
    }
    @media (max-width:560px) {
      nav ul { display:none; }
      .page { width:94%; }
    }
  </style>
</head>
<body>
  <a href="#main" class="skip">Saltar al contenido</a>

  <header>
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">Li</div>
        <div>
          <div style="font-weight:900;">Energía & Litio</div>
          <div style="font-size:.78rem; opacity:.9;">Propuesta Nacional — Soberanía Energética en Bolivia</div>
        </div>
      </div>
      <nav role="navigation" aria-label="Navegación principal">
        <ul>
          <li><a href="#about">Sobre la Iniciativa</a></li>
          <li><a href="#impact">Impacto</a></li>
          <li><a href="#solutions">Soluciones</a></li>
          <li><a href="#tech">Tecnologías</a></li>
          <li><a href="#policy">Incentivos</a></li>
          <li><a href="#ecos">Proyecto EcoSal</a></li>
          <li><a href="#opinion">Tu Opinión</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main" class="page" role="main">
    <!-- HERO -->
    <section class="hero" aria-label="Hero - Industrialización del litio">
      <div class="hero-inner card" data-delay="1">
        <h1>Industrialización del Litio: Pilar Estratégico para la Soberanía Energética de Bolivia</h1>
        <p>
          Bolivia cuenta con una de las reservas más importantes de litio a nivel global. La integración vertical —desde la extracción responsable hasta la producción de baterías— representa una solución estructural frente a la escasez de combustibles fósiles y una oportunidad de desarrollo económico sostenible.
        </p>
        <a class="cta" href="#solutions">Conoce las Estrategias</a>
        <small>Presentado por: Nicolás Cabrera y Juan Daniel Marín</small>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" aria-labelledby="about-title">
      <h2 id="about-title" class="section-title">Sobre la Iniciativa</h2>
      <article class="card content" data-delay="2" role="article" aria-describedby="about-desc">
        <div id="about-desc">
          <p>
            El litio —“oro blanco”— es la materia prima crítica para baterías recargables que alimentan vehículos eléctricos, almacenamiento estacionario y dispositivos electrónicos. La estrategia transforma la extracción en cadenas de alto valor, con mitigación ambiental y beneficios sociales.
          </p>
          <p><strong>Pregunta central:</strong> ¿Cómo aprovechar este recurso para fabricar baterías de autos eléctricos en Bolivia, incentivando su uso y protegiendo el medio ambiente? </p>
          <ul>
            <li>Complejos integrados: cátodos, celdas y ensamblaje de packs.</li>
            <li>Movilidad eléctrica pública/privada con incentivos e infraestructura.</li>
            <li>I+D, formación técnica y transferencia tecnológica con alianzas. </li>
          </ul>
        </div>
      </article>
    </section>

    <!-- IMPACT -->
    <section id="impact" aria-labelledby="impact-title">
      <h2 id="impact-title" class="section-title">Impacto Económico, Ambiental y Social</h2>
      <article class="card" data-delay="3" role="region" aria-label="Impacto">
        <div class="content">
          <p><strong>La industrialización responsable del litio puede generar beneficios estructurales:</strong></p>

          <div class="counters" aria-hidden="false">
            <div class="counter" data-target="21000000" aria-label="Reservas estimadas">
              <span class="num" data-value="21000000">0</span>
              <span class="label">Toneladas estimadas de litio</span>
            </div>
            <div class="counter" data-target="50000" aria-label="Empleos estimados">
              <span class="num" data-value="50000">0</span>
              <span class="label">Empleos potenciales (directos + indirectos)</span>
            </div>
            <div class="counter" data-target="40" aria-label="Reducción de emisiones">
              <span class="num" data-value="40">0</span>
              <span class="label">% reducción estimada de emisiones en transporte</span>
            </div>
          </div>

          <p style="margin-top:12px;">
            Bolivia tiene más de <strong>21 millones de toneladas</strong> de litio en sus salares (Uyuni, Coipasa, Pastos Grandes). Políticas públicas deben garantizar control ambiental, participación comunitaria, transferencia tecnológica y cadenas de valor sostenibles. 
          </p>
        </div>
      </article>
    </section>

    <!-- SOLUTIONS -->
    <section id="solutions" aria-labelledby="solutions-title">
      <h2 id="solutions-title" class="section-title">Soluciones Propuestas y Estrategias Clave</h2>

      <div class="card" data-delay="4" role="region" aria-label="Soluciones">
        <div class="content">
          <p>Para convertir el recurso en desarrollo sostenible proponemos tres ejes complementarios:</p>

          <div class="slider" role="region" aria-label="Slider de soluciones">
            <div class="slides-container" id="slides">
              <div class="slide" id="slide1">
                <h3>Complejos Industriales Integrados</h3>
                <p>
                  Refinación a carbonato/hidróxido, producción de cátodos/ánodos y fabricación de celdas y packs, con proveedores locales y control de la cadena. 
                </p>
              </div>
              <div class="slide" id="slide2">
                <h3>Movilidad Eléctrica y Almacenamiento</h3>
                <p>
                  Infraestructura de carga, renovación de flotas y adopción de baterías locales para transporte urbano y logística. 
                </p>
              </div>
              <div class="slide" id="slide3">
                <h3>Alianzas para Innovación</h3>
                <p>
                  Convenios con universidades/centros tecnológicos para I+D, formación especializada y estandarización de fabricación/reciclaje. 
                </p>
              </div>
            </div>

            <div class="slider-controls" role="tablist" aria-label="Controles del slider">
              <button class="slider-button active" role="tab" aria-selected="true" aria-controls="slide1" data-index="0" title="Slide 1"></button>
              <button class="slider-button" role="tab" aria-selected="false" aria-controls="slide2" data-index="1" title="Slide 2"></button>
              <button class="slider-button" role="tab" aria-selected="false" aria-controls="slide3" data-index="2" title="Slide 3"></button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TECNOLOGÍAS SOSTENIBLES -->
    <section id="tech" aria-labelledby="tech-title">
      <h2 id="tech-title" class="section-title">Tecnologías para Extracción Sostenible</h2>
      <article class="card content" role="article">
        <p><strong>Extracción tradicional (evaporación en salmueras):</strong> alto uso de agua en zonas áridas, riesgo de filtraciones y afectación a ecosistemas y comunidades. </p>
        <p><strong>Extracción Directa de Litio (DLE):</strong> mayor eficiencia, menor consumo de agua, evita grandes evaporaciones, uso de membranas/filtros, monitoreo ambiental en tiempo real. </p>
      </article>
    </section>

    <!-- POLÍTICA PÚBLICA / INCENTIVOS -->
    <section id="policy" aria-labelledby="policy-title">
      <h2 id="policy-title" class="section-title">Incentivos y Política Pública</h2>
      <article class="card content" role="article">
        <ul>
          <li>Reducción/exoneración de impuestos a importación y venta de EVs.</li>
          <li>Subsidios a compradores y ensambladoras locales.</li>
          <li>Programas de recambio de vehículos antiguos por eléctricos.</li>
          <li>Inversión en infraestructura de carga urbana y carreteras.</li>
          <li>Apoyo a I+D en tecnologías de baterías. </li>
        </ul>
      </article>
    </section>

    <!-- CASOS DE ÉXITO / RETOS -->
    <section aria-labelledby="cases-title">
      <h2 id="cases-title" class="section-title">Casos de Éxito y Lecciones</h2>
      <article class="card content">
        <p>Chile y Australia muestran experiencias de producción sostenible, cooperación internacional y transferencia tecnológica aplicables al contexto boliviano. </p>
      </article>

      <article class="card content" aria-labelledby="challenges-title">
        <h3 id="challenges-title" style="color:var(--accent-1); margin-bottom:10px;">Retos y Oportunidades</h3>
        <ul>
          <li><strong>Retos:</strong> financiamiento, tecnología, capital humano, protección ambiental y derechos sociales.</li>
          <li><strong>Oportunidades:</strong> liderar la electromovilidad regional, diversificar la economía y promover desarrollo sostenible. </li>
        </ul>
      </article>
    </section>

    <!-- PROYECTO ECOSAL -->
    <section id="ecos" aria-labelledby="ecos-title">
      <h2 id="ecos-title" class="section-title">Solución Propuesta: Proyecto EcoSal</h2>
      <article class="card content" role="article">
        <p><strong>Objetivo:</strong> Transformar los residuos de salmuera en recursos aprovechables, garantizando cero contaminación. </p>
        <div class="slider" role="region" aria-label="Etapas del Proyecto EcoSal">
          <div class="slides-container" id="slides-ecos">
            <div class="slide" id="ecos1">
              <h3>Etapa 1: Captación segura</h3>
              <p>Estanques cerrados con membranas impermeables y monitoreo en tiempo real.</p>
            </div>
            <div class="slide" id="ecos2">
              <h3>Etapa 2: Recuperación de minerales</h3>
              <p>Separación de litio residual, potasio, magnesio y boro para su comercialización.</p>
            </div>
            <div class="slide" id="ecos3">
              <h3>Etapa 3: Purificación del agua</h3>
              <p>Biofiltros con algas y bacterias, filtrado con zeolita y carbón activado.</p>
            </div>
            <div class="slide" id="ecos4">
              <h3>Etapa 4: Subproductos sólidos</h3>
              <p>Bloques para construcción, caminos y artesanías.</p>
            </div>
            <div class="slide" id="ecos5">
              <h3>Etapa 5: Restauración ecológica</h3>
              <p>Microhumedales artificiales y reforestación de especies autóctonas.</p>
            </div>
          </div>
          <div class="slider-controls" role="tablist" aria-label="Controles EcoSal">
            <button class="slider-button active" role="tab" aria-selected="true" aria-controls="ecos1" data-index="0" title="Etapa 1"></button>
            <button class="slider-button" role="tab" aria-selected="false" aria-controls="ecos2" data-index="1" title="Etapa 2"></button>
            <button class="slider-button" role="tab" aria-selected="false" aria-controls="ecos3" data-index="2" title="Etapa 3"></button>
            <button class="slider-button" role="tab" aria-selected="false" aria-controls="ecos4" data-index="3" title="Etapa 4"></button>
            <button class="slider-button" role="tab" aria-selected="false" aria-controls="ecos5" data-index="4" title="Etapa 5"></button>
          </div>
        </div>

        <div class="counters" aria-hidden="false" style="margin-top:14px;">
          <div class="counter" data-target="0" aria-label="Cero vertidos">
            <span class="num" data-value="0">0</span>
            <span class="label">Vertido contaminante objetivo</span>
          </div>
          <div class="counter" data-target="1000" aria-label="Empleos verdes">
            <span class="num" data-value="1000">0</span>
            <span class="label">Empleos verdes estimados</span>
          </div>
          <div class="counter" data-target="4" aria-label="Minerales aprovechados">
            <span class="num" data-value="4">0</span>
            <span class="label">Minerales secundarios (K, Mg, B, Li)</span>
          </div>
        </div>

        <p style="margin-top:12px;">
          <strong>Beneficios:</strong> Cero vertido contaminante, ingresos por minerales secundarios, empleos verdes y preservación del ecosistema del Salar de Uyuni. 
        </p>
      </article>
    </section>

    <!-- CONCLUSIÓN -->
    <section aria-labelledby="end-title">
      <h2 id="end-title" class="section-title">Conclusión</h2>
      <article class="card content">
        <p>
          Bolivia puede convertirse en referente de producción de litio y baterías para autos eléctricos. Es clave impulsar incentivos y protección ambiental; la sostenibilidad debe ser eje central para evitar impactos negativos. 
        </p>
      </article>
    </section>

    <!-- OPINION -->
    <section id="opinion" aria-labelledby="opinion-title">
      <h2 id="opinion-title" class="section-title">Tu Opinión sobre la Estrategia Nacional del Litio</h2>

      <div class="card" data-delay="2" role="form">
        <form id="opinionForm" aria-label="Formulario de opinión">
          <label for="name">Nombre</label>
          <input id="name" name="name" type="text" placeholder="Tu nombre" required />

          <label for="comment">¿Qué opinas de la propuesta?</label>
          <textarea id="comment" name="comment" placeholder="Comparte tu opinión..." required></textarea>

          <button type="submit">Enviar Opinión</button>
        </form>

        <div id="opinionsList" aria-live="polite" aria-atomic="true" role="region">
          <h3 style="text-align:center; color:var(--accent-1); font-weight:900; margin-bottom:12px;">Opiniones Recibidas</h3>
          <ul id="opinionsUl"></ul>
        </div>
      </div>
    </section>
  </main>

  <footer>
    © 2025 Nicolás Cabrera y Juan Daniel Marín. Propuesta de Estrategia Nacional para la Industrialización del Litio en Bolivia.
  </footer>

  <script>
    /* ============================
       Interactivity & animations
       ============================ */

    // Utility: prefers-reduced-motion
    const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // IntersectionObserver reveal for .card and counters 
    (function(){
      const cards = document.querySelectorAll('.card');
      const cb = (entries, obs) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            entry.target.classList.add('is-visible');
            // If counters inside, start them
            const counters = entry.target.querySelectorAll('.counter .num');
            counters.forEach(n => startCounter(n));     
            obs.unobserve(entry.target);
          }
        });
      };

      const io = new IntersectionObserver(cb, { threshold: 0.15 });
      cards.forEach((c, i) => {
        c.dataset.delay = (i % 6) + 1;
        io.observe(c);
      });

      if(reduceMotion){
        cards.forEach(c => c.classList.add('is-visible'));
      }
    })();

    // Animated counters
    function startCounter(el){
      if(el.dataset.started) return;
      el.dataset.started = '1';
      const target = parseFloat(el.getAttribute('data-value')) || 0;
      const duration = 1400; // ms
      const start = performance.now();
      const initial = 0;
      function tick(now){
        let t = Math.min(1, (now - start)/duration);
        let eased = (--t)*t*t + 1; // easeOutCubic
        const val = Math.round(initial + (target - initial)*eased);
        el.textContent = val.toLocaleString();
        if(now - start < duration) requestAnimationFrame(tick);
        else el.textContent = target.toLocaleString();
      }
      requestAnimationFrame(tick);
    }

    // Initialize numbers with dataset values
    document.querySelectorAll('.counter .num').forEach(n=> n.textContent = '0');

    // Generic slider function to reuse
    function makeSlider(containerSelector, buttonsSelector){
      const slidesContainer = document.querySelector(containerSelector);
      const buttons = document.querySelectorAll(buttonsSelector);
      let index = 0;
      let timer = null;
      const len = slidesContainer ? slidesContainer.children.length : 0;

      function go(i){
        index = (i + len) % len;
        slidesContainer.style.transform = `translateX(-${index * 100}%)`;
        buttons.forEach((b,bi)=> {
          b.classList.toggle('active', bi === index);
          b.setAttribute('aria-selected', bi === index ? 'true' : 'false');
        });
      }

      function auto(){ timer = setInterval(()=> go(index+1), 7000); }
      function stop(){ if(timer){ clearInterval(timer); timer=null; } }
      function resetAuto(){ stop(); if(!reduceMotion) auto(); }

      buttons.forEach(btn => {
        btn.addEventListener('click', () => { go(Number(btn.dataset.index)); resetAuto(); });
        btn.addEventListener('keydown', e=>{
          if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); }
        });
      });

      const slider = slidesContainer?.parentElement;
      if(slider){
        slider.addEventListener('mouseenter', stop);
        slider.addEventListener('mouseleave', ()=> { if(!reduceMotion) auto(); });
        slider.addEventListener('focusin', stop);
        slider.addEventListener('focusout', ()=> { if(!reduceMotion) auto(); });
      }

      go(0);
      if(!reduceMotion) auto();
    }

    // Init sliders
    makeSlider('#slides', '.slider[aria-label="Slider de soluciones"] .slider-button');
    makeSlider('#slides-ecos', '#ecos .slider-button');

    // Opinions: localStorage
    (function(){
      const form = document.getElementById('opinionForm');
      const opinionsList = document.getElementById('opinionsList');
      const ul = document.getElementById('opinionsUl');

      function load(){
        const saved = localStorage.getItem('opinions_v1');
        if(saved){
          const arr = JSON.parse(saved);
          ul.innerHTML = '';
          arr.forEach(o=>{
            const li = document.createElement('li');
            li.textContent = `${o.name}: ${o.comment}`;
            ul.appendChild(li);
          });
          opinionsList.style.display = arr.length ? 'block' : 'none';
        } else {
          opinionsList.style.display = 'none';
        }
      }

      load();

      form.addEventListener('submit', e=>{
        e.preventDefault();
        const name = form.name.value.trim();
        const comment = form.comment.value.trim();
        if(!name || !comment) return;
        const saved = localStorage.getItem('opinions_v1');
        const arr = saved ? JSON.parse(saved) : [];
        arr.unshift({ name, comment, at: (new Date()).toISOString() });
        localStorage.setItem('opinions_v1', JSON.stringify(arr.slice(0,200)));
        load();
        form.reset();
        const note = document.createElement('div');
        note.textContent = '¡Gracias! Tu opinión fue registrada.';
        note.setAttribute('role','status');
        note.style.padding = '10px';
        note.style.background = 'linear-gradient(90deg,#e6f4ea,#f7fff7)';
        note.style.borderRadius = '8px';
        note.style.marginTop = '8px';
        form.appendChild(note);
        setTimeout(()=> note.remove(), 2600);
      });
    })();

    // Accessibility: keyboard skip (simple)
    (function(){
      const firstNav = document.querySelector('nav a');
      if(firstNav){
        firstNav.setAttribute('tabindex','0');
      }
    })();

    // Fallback: in caso de no soportar IntersectionObserver
    if(!('IntersectionObserver' in window)){
      document.querySelectorAll('.card').forEach(c => c.classList.add('is-visible'));
      document.querySelectorAll('.counter .num').forEach(n => {
        n.textContent = n.getAttribute('data-value') || '0';
      });
    }
  </script>
</body>
</html>
